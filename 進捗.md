# ふるさと魅力発見ボードゲーム - 進捗

## 最終更新: 2026-02-01 12:00

## ステータス: デモ版公開中

## 公開URL
https://furusato-board-game.vercel.app

## 完了したフェーズ

### Phase 1: 基盤構築
- [x] Next.js 16 + TypeScript + Tailwind 初期化
- [x] shadcn/ui セットアップ
- [x] Supabase クライアント設定
- [x] 型定義（`src/types/game.ts`）
- [x] 定数ファイル（cards.ts, board.ts, game.ts）
- [x] DBスキーマ（`supabase/migrations/001_initial_schema.sql`）

### Phase 2: ルーム機能
- [x] ルーム作成・参加API（`src/lib/supabase/api.ts`）
- [x] ホーム画面（`src/app/page.tsx`）
- [x] 待機室UI（`src/app/waiting/[roomId]/page.tsx`）
- [x] Realtime購読（`src/lib/supabase/realtime.ts`）

### Phase 3: ゲームコア
- [x] ゲームエンジン（`src/lib/game/engine.ts`）
- [x] ゲーム状態管理フック（`src/hooks/useGameState.ts`）
- [x] サイコロ・移動ロジック
- [x] カード効果処理
- [x] 勝利・敗北条件チェック

### Phase 4: UI実装
- [x] ゲーム盤面（`src/components/game/GameBoard.tsx`）
- [x] 幸福度ゲージ（`src/components/game/HappinessGauge.tsx`）
- [x] プレイヤーステータス（`src/components/game/PlayerStatus.tsx`）
- [x] 人口メーター（`src/components/game/PopulationMeter.tsx`）
- [x] アクションパネル（`src/components/game/ActionPanel.tsx`）
- [x] ゲームヘッダー（`src/components/game/GameHeader.tsx`）
- [x] ゲームログ（`src/components/game/GameLog.tsx`）
- [x] ゲームルール説明（`src/components/game/GameRules.tsx`）
- [x] メインゲーム画面（`src/app/room/[roomId]/page.tsx`）
- [x] 結果画面（`src/app/result/[roomId]/page.tsx`）

### Phase 5: 統合・デプロイ
- [x] TypeScriptビルド成功
- [x] デモモード実装（ローカルストレージ使用）
- [x] Vercelデプロイ完了
- [x] 同一ブラウザ複数タブでのプレイ対応（sessionStorage）
- [ ] E2Eテスト（Playwright）- 未実装
- [ ] Supabase本番接続 - 未設定

## 追加実装（デモ版対応）

- [x] モックAPI（`src/lib/supabase/mock-api.ts`）
- [x] モックRealtime（`src/lib/supabase/mock-realtime.ts`）- ポーリング方式
- [x] sessionStorageでタブごとにプレイヤーID分離
- [x] 遊び方ガイド（ホーム画面 + ダイアログ）

## 現在の制限事項（デモ版）

- 同一ブラウザ内の複数タブでのみプレイ可能
- 異なるデバイス・ブラウザ間での同期不可
- データはブラウザのローカルストレージに保存

## 次のステップ（本番化する場合）

1. **Supabaseプロジェクト作成**
   - https://supabase.com でプロジェクト作成
   - `supabase/migrations/001_initial_schema.sql` を実行
   - Vercelに環境変数設定

2. **E2Eテスト追加**
   - Playwright導入
   - 主要フローのテスト作成

3. **機能追加検討**
   - ユーザー認証
   - ランキング
   - チャット機能

## ファイル構成

```
src/
├── app/
│   ├── page.tsx              # ホーム（ゲーム説明付き）
│   ├── waiting/[roomId]/     # 待機室
│   ├── room/[roomId]/        # ゲーム画面
│   └── result/[roomId]/      # 結果画面
├── components/
│   ├── ui/                   # shadcn/ui
│   └── game/                 # ゲームコンポーネント（8種類）
├── hooks/
│   └── useGameState.ts       # ゲーム状態管理
├── lib/
│   ├── supabase/             # API（本番/モック切り替え）
│   └── game/                 # ゲームロジック
├── types/
│   └── game.ts               # 型定義
└── constants/
    ├── cards.ts              # カード10枚
    ├── board.ts              # 盤面20マス
    └── game.ts               # ゲーム設定
```

## 技術スタック

- Next.js 16.1.6 (App Router)
- TypeScript
- Tailwind CSS v4
- shadcn/ui
- Supabase（本番時）/ ローカルストレージ（デモ時）
- Vercel
